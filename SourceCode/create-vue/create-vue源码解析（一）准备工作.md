# create-vueæºç è§£æï¼ˆä¸€ï¼‰å‡†å¤‡å·¥ä½œ

**æ‘˜è¦ï¼š**

æœ¬ç³»åˆ—ä¸»è¦ä»å°ç™½è§†è§’å…¥æ‰‹ï¼Œæ¢è®¨ `create-vue` è„šæ‰‹æ¶çš„å®ç°ç»†èŠ‚ï¼Œå…±åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼Œæœ¬æ–‡æ˜¯è¯¥ç³»åˆ—çš„ç¬¬ä¸€ç¯‡â€”â€”å‡†å¤‡ç¯‡ã€‚

æœ¬æ–‡å°†ä¸»è¦è®²è§£ä¸€ä¸ªå°ç™½åœ¨å­¦ä¹ æºç å‰éœ€è¦åšçš„ä¸€äº›å‡†å¤‡å·¥ä½œã€‚

## 

## 1. è·å–æºç  ğŸ¯

æƒ³è¦ç³»ç»Ÿçš„å­¦ä¹ æºç ï¼Œå½“ç„¶éœ€è¦å…ˆæœ‰ä¸€ä»½æºç ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä»å®˜æ–¹ä»“åº“ä¸‹è½½ä¸€ä»½å®˜æ–¹çš„æºç ä¸‹æ¥ã€‚å¯ä»¥ `clone` åˆ°æœ¬åœ°ï¼Œä½†æˆ‘å»ºè®®æœ€å¥½è¿˜æ˜¯ç›´æ¥ `fork` ä¸€ä»½åˆ°è‡ªå·±çš„ `github` è´¦æˆ·ã€‚

æ¯•ç«Ÿï¼Œè‡ªå·±ç”µè„‘ä¸Šçš„èµ„æ–™æ€»æœ‰ä¸¢å¤±çš„é£é™©ï¼Œéšæ—¶æŠŠå­¦ä¹ èµ„æ–™åŒæ­¥åˆ° `github` æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚åŒæ—¶ï¼Œä¹Ÿå¯ä»¥æŠŠè‡ªå·±çš„å­¦ä¹ å¿ƒå¾—å¼€æºå‡ºæ¥ï¼Œå¸®åŠ©ä»–äººã€‚æœ€åï¼Œå¯¹äºå°å°ç™½ï¼Œå¹³æ—¶å¤šå¤šä½¿ç”¨ `git` ,å¯¹ä»¥åçš„å·¥ä½œä¹Ÿæ˜¯å¸®åŠ©ä¸å°ã€‚

### 1.1 æºç åœ°å€

![image-20230918192900168](https://cherish-1256678432.cos.ap-nanjing.myqcloud.com/typora/image-20230918192900168.png)

[create-vue](https://github.com/vuejs/create-vue)

> https://github.com/vuejs/create-vue

### 1.2 æºç ç‰ˆæœ¬

>  3.6.4

### 1.3 ç›®å½•ç»“æ„

![image-20230910112302032](https://cherish-1256678432.cos.ap-nanjing.myqcloud.com/typora/image-20230910112302032.png)

## 2. ç”¨é€”

æ—¢ç„¶è¦åˆ†æï¼Œæ€»è¦æ¸…æ¥šå·¥å…·çš„ä½œç”¨ã€‚

`create-vue` æ˜¯ä¸€æ¬¾ `vue` è„šæ‰‹æ¶ã€‚æ˜¯ `vue` å®˜æ–¹è„šæ‰‹æ¶ `vue/cli` çš„æ›¿ä»£è€…ã€‚

è„šæ‰‹æ¶æ˜¯å»ºç­‘è¡Œä¸šç”¨æ¥ååŠ©æ­å»ºå·¥ç¨‹çš„å·¥å…·ï¼Œç±»æ¨è¿‡æ¥ï¼Œ`create-vue` æ˜¯ç”¨æ¥ååŠ©vueå¼€å‘äººå‘˜å¿«é€Ÿæ­å»ºåŸºäºvueæŠ€æœ¯æ ˆå‰ç«¯å·¥ç¨‹çš„å·¥å…·ã€‚ä½¿ç”¨ `create-vue` å¯ä»¥åŸºäºå¼€å‘è€…çš„éœ€è¦ï¼Œä¸€ç«™å¼ç”Ÿæˆå„ç±»ä¸åŒé…ç½®çš„vueå·¥ç¨‹ã€‚

## 3. ä¾èµ–åˆ†æğŸ‘€

å¦‚æœå¸Œæœ›ç³»ç»Ÿåˆ†ææºç ï¼Œå»ºè®®å…ˆçœ‹çœ‹æ•´ä¸ªé¡¹ç›®ä¸­ç”¨åˆ°äº†é‚£äº›ä¾èµ–ï¼Œé‚£äº›æŠ€æœ¯ç‚¹ï¼Œéƒ½æ˜¯å¹²å•¥çš„ï¼Ÿ

å¯¹äºä¸€äº›ä¸äº†è§£çš„ä¾èµ–ï¼Œå¯ä»¥æå‰äº†è§£ä¸€ä¸‹ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ä¾èµ–å¤§è‡´åˆ†æå‡ºé¡¹ç›®çš„è§£å†³æ€è·¯ã€‚

ä»¥ä¸‹æ˜¯ `create-vue` çš„ `package.json` æ–‡ä»¶ã€‚

```json
{
  "name": "create-vue",
  "version": "3.6.4",
  "description": "An easy way to start a Vue project",
  "type": "module",
  "bin": {
    "create-vue": "outfile.cjs"
  },
  "files": [
    "outfile.cjs",
    "template"
  ],
  "engines": {
    "node": ">=v16.20.0"
  },
  "scripts": {
    "prepare": "husky install",
    "format": "prettier --write .",
    "build": "zx ./scripts/build.mjs",
    "snapshot": "zx ./scripts/snapshot.mjs",
    "pretest": "run-s build snapshot",
    "test": "zx ./scripts/test.mjs",
    "prepublishOnly": "zx ./scripts/prepublish.mjs"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/vuejs/create-vue.git"
  },
  "keywords": [],
  "author": "Haoqun Jiang <haoqunjiang+npm@gmail.com>",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/vuejs/create-vue/issues"
  },
  "homepage": "https://github.com/vuejs/create-vue#readme",
  "devDependencies": {
    "@tsconfig/node18": "^2.0.1", 
    "@types/eslint": "^8.37.0",
    "@types/node": "^18.16.8",
    "@types/prompts": "^2.4.4",
    "@vue/create-eslint-config": "^0.2.1",
    "@vue/tsconfig": "^0.4.0",
    "esbuild": "^0.17.18",
    "esbuild-plugin-license": "^1.2.2",
    "husky": "^8.0.3",
    "kolorist": "^1.8.0",
    "lint-staged": "^13.2.2",
    "minimist": "^1.2.8",
    "npm-run-all": "^4.1.5",
    "prettier": "^2.8.8",
    "prompts": "^2.4.2",
    "zx": "^4.3.0"
  },
  "lint-staged": {
    "*.{js,ts,vue,json}": [
      "prettier --write"
    ]
  }
}

```

ä¸‹é¢é€šè¿‡ä¸‹è¡¨ä¸€å¥è¯ç®€å•ä»‹ç»ä¸€ä¸‹æ¯ä¸ªä¾èµ–çš„ä½œç”¨ï¼š

| ä¾èµ–å                    | åŠŸèƒ½                                                         |
| ------------------------- | ------------------------------------------------------------ |
| @tsconfig/node18          | node.js18é…å¥—çš„tsconfig                                      |
| @types/eslint             | eslintç›¸å…³                                                   |
| @types/node               | node.jsçš„ç±»å‹å®šä¹‰                                            |
| @vue/create-eslint-config | åœ¨Vue.jsé¡¹ç›®ä¸­è®¾ç½®ESLintçš„å®ç”¨ç¨‹åºã€‚                         |
| @vue/tsconfig             | ç”¨äºVueé¡¹ç›®çš„TS Configureæ‰©å±•ã€‚                              |
| esbuild                   | JavaScript å’Œ golang æ‰“åŒ…å·¥å…·ï¼Œåœ¨æ‰“åŒ…æ—¶ä½¿ç”¨ï¼Œåæ–‡ä¼šå…·ä½“åˆ†æï¼Œå»ºè®®é¢„å…ˆäº†è§£ï¼Œå°¤å…¶æ˜¯ esbuild.build å‡½æ•°çš„ç›¸å…³ Api |
| esbuild-plugin-license    | è®¸å¯è¯ç”Ÿæˆæ’ä»¶ï¼Œç”¨äºåœ¨æ‰“åŒ…æ—¶ï¼Œç”Ÿæˆ LICENSE æ–‡ä»¶              |
| husky                     | git é’©å­ï¼Œä»£ç æäº¤è§„èŒƒå·¥å…·                                   |
| kolorist                  | ç»™stdin/stdoutçš„æ–‡æœ¬å†…å®¹æ·»åŠ é¢œè‰²ï¼Œå»ºè®®é¢„å…ˆäº†è§£ã€‚             |
| lint-staged               | æ ¼å¼åŒ–ä»£ç                                                    |
| minimist                  | è§£æå‚æ•°é€‰é¡¹ï¼Œ å½“ç”¨æˆ·ä» terminal ä¸­è¾“å…¥å‘½ä»¤æŒ‡ä»¤æ—¶ï¼Œå¸®åŠ©è§£æå„ä¸ªå‚æ•°çš„å·¥å…·ï¼Œå»ºè®®é¢„å…ˆäº†è§£ã€‚ |
| npm-run-all               | ä¸€ä¸ªCLIå·¥å…·ï¼Œç”¨äºå¹¶è¡Œæˆ–é¡ºåºè¿è¡Œå¤šä¸ªnpm-scriptã€‚              |
| prettier                  | ä»£ç æ ¼å¼åŒ–                                                   |
| prompts                   | è½»å·§ã€ç¾è§‚ã€äººæ€§åŒ–çš„äº¤äº’å¼æç¤ºã€‚åœ¨ terminal ä¸­åšå¯¹è¯äº¤äº’çš„ã€‚å»ºè®®é¢„å…ˆäº†è§£ã€‚ |
| @types/prompts            | prompts åº“çš„ç±»å‹å®šä¹‰                                         |
| zx                        | è¯¥åº“ä¸ºå¼€å‘è€…åœ¨JavaScriptä¸­ç¼–å†™shellè„šæœ¬æä¾›äº†ä¸€ç³»ä¾‹åŠŸèƒ½ï¼Œä½¿å¼€å‘æ›´æ–¹ä¾¿å¿«æ·ï¼Œä¸»è¦åœ¨ç¼–å†™å¤æ‚çš„ script å‘½ä»¤æ˜¯ä½¿ç”¨ã€‚åªè¦åœ¨æ‰“åŒ…ï¼Œå¿«ç…§ï¼Œé¢„å‘å¸ƒé˜¶æ®µç¼–å†™è„šæœ¬æ—¶ä½¿ç”¨ï¼Œå»ºè®®é¢„å…ˆäº†è§£ã€‚ |

å¯ä»¥çœ‹åˆ°ï¼Œè¿™16ä¸ªä¾èµ–ï¼ŒçœŸæ­£å’ŒcliåŠŸèƒ½ç´§å¯†ç›¸å…³çš„åº”è¯¥æ˜¯ä»¥ä¸‹å‡ ä¸ªï¼š

- esbuild
- kolorist
- minimist
- prompts
- zx

æ‰€ä»¥ï¼Œå­¦ä¹  create-vue çš„ä¹‹å‰ï¼Œå¯ä»¥å…ˆé˜…è¯»ä»¥ä¸‹å‡ ä¸ªåº“çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œä»¥ä¾¿åœ¨é˜…è¯»æºç è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°æœ‰çŸ¥è¯†ç‚¹ç›²åŒºçš„ï¼Œå¯ä»¥å®šå‘å­¦ä¹ ã€‚

## 4. é¡¹ç›®ç›®å½•ç»“æ„åŠåŠŸèƒ½æ¨¡å—ç®€ä»‹ ğŸªœ

ä»¥ä¸‹æ˜¯ `create-vue` æºç çš„å·¥ç¨‹ç›®å½•ç»“æ„ï¼š

```txt
F:\Study\Vue\Code\VueSourceCode\create-vue
â”œâ”€â”€ CONTRIBUTING.md
â”œâ”€â”€ index.ts // ä¸»æ–‡ä»¶
â”œâ”€â”€ LICENSE
â”œâ”€â”€ media
â”œâ”€â”€ package.json
â”œâ”€â”€ playground
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ pnpm-workspace.yaml
â”œâ”€â”€ README.md
â”œâ”€â”€ renovate.json
â”œâ”€â”€ scripts
|  â”œâ”€â”€ build.mjs // esbuild æ‰“åŒ…è„šæœ¬
|  â”œâ”€â”€ prepublish.mjs // é¢„å‘å¸ƒè„šæœ¬
|  â”œâ”€â”€ snapshot.mjs // ç”Ÿæˆå¿«ç…§è„šæœ¬
|  â””â”€â”€ test.mjs
â”œâ”€â”€ template // å„ç±»æ¨¡æ¿
|  â”œâ”€â”€ base
|  â”œâ”€â”€ code
|  â”œâ”€â”€ config
|  â”œâ”€â”€ entry
|  â”œâ”€â”€ eslint
|  â””â”€â”€ tsconfig
â”œâ”€â”€ tsconfig.json
â””â”€â”€ utils
   â”œâ”€â”€ banners.ts // ç»ˆç«¯ä¸­å½©è‰²æç¤ºæ–‡å­—è¾“å‡º
   â”œâ”€â”€ deepMerge.ts // å·¥å…·å‡½æ•°ï¼Œå¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œæ·±åº¦åˆå¹¶ï¼Œç”¨äº cli æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹å„template çš„ä¾èµ–è¿›è¡Œåˆå¹¶
   â”œâ”€â”€ directoryTraverse.ts // æ–‡ä»¶å¤¹é€’å½’æ“ä½œ
   â”œâ”€â”€ generateReadme.ts // ç”Ÿæˆå·¥ç¨‹çš„ readme æ–‡ä»¶
   â”œâ”€â”€ getCommand.ts // 
   â”œâ”€â”€ renderEslint.ts // ç”Ÿæˆ eslint é…ç½®æ–‡ä»¶
   â”œâ”€â”€ renderTemplate.ts // ç”Ÿæˆé€šç”¨æ¨¡å—æ¨¡æ¿
   â””â”€â”€ sortDependencies.ts // å¯¹ package.json ä¸­çš„ä¾èµ–è¿›è¡Œåˆ†ç±»ï¼Œdependency devDependency ç­‰
```

å¯ä»¥çœ‹åˆ°ï¼Œé™¤å¼€ä¸€äº›é…ç½®æ–‡ä»¶å’Œç©ºæ–‡ä»¶å¤¹åï¼ŒçœŸæ­£ç”¨åˆ°çš„æ–‡ä»¶å°±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š

- husky

> è¿™ä¸ªæ˜¯ä¸€æ¬¾git hook å·¥å…·ï¼Œæ”¯æŒåœ¨å¼€å‘äººå‘˜è¿›è¡Œ `git` æ“ä½œæ—¶ï¼Œæ ¹æ®ä¸åŒéœ€æ±‚ï¼Œè§¦å‘ä¸€äº›è‡ªå®šä¹‰åŠ¨ä½œï¼Œé€šå¸¸ç”¨äºå›¢é˜Ÿå·¥ä½œä¸­å¯¹ä»£ç æäº¤æµç¨‹è¿›è¡Œçº¦æŸå’Œè§„èŒƒã€‚

- scripts

> è¿™ä¸ªç›®å½•ä¸‹ä¸»è¦æ˜¯é¡¹ç›®æ‰“åŒ…ï¼Œå¿«ç…§ï¼Œé¢„å‘å¸ƒï¼Œå•å…ƒæµ‹è¯•è¿™å‡ å—å†…å®¹çš„ `script` è„šæœ¬. åœ¨æœ¬ç³»åˆ—ç¬¬å››ä¸ªéƒ¨åˆ†å°†è¯¦è§£è¿™éƒ¨åˆ†å†…å®¹ã€‚

- template

> è¿™ä¸ªé‡Œé¢æ˜¯è¿™ä¸ªåº“çš„æ ¸å¿ƒéƒ¨åˆ†äº†â€”â€”æ¨¡æ¿ã€‚æˆ‘ä»¬ cli åœ¨æ‰§è¡Œæ—¶ï¼Œå°±æ˜¯ä¼šä»è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­è¯»å–å„ç§é…ç½®çš„ä»£ç å®ç°ï¼Œæœ€åæŠŠè¿™äº›ä»£ç ç»„åˆæˆä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ï¼Œç„¶åç»™ç”¨æˆ·å¿«é€Ÿç”Ÿæˆä¸€ä¸ªé¡¹ç›®æ¨¡æ¿ã€‚
>
> è¿™ä¸ªæ¨¡æ¿åªè¦ä½ äº‹å…ˆé¢„åˆ¶å¥½å³å¯ã€‚

- utils

> é¡¹ç›®ä¸­ç”¨åˆ°çš„ä¸€äº›å·¥å…·æ–¹æ³•ï¼Œå¯åœ¨ç”¨åˆ°çš„æ—¶å€™å†å…·ä½“å»åˆ†æã€‚

- **index.ts**

> é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…å«äº†cli æ‰§è¡Œçš„æ‰€æœ‰é€»è¾‘ï¼Œæ˜¯create-vueè„šæ‰‹æ¶çš„æ ¸å¿ƒå®ç°ã€‚

ä»¥ä¸Šå°±æ˜¯é¡¹ç›®ä¸­ä¸€äº›å…·ä½“æ¨¡å—çš„å¤§è‡´åŠŸèƒ½äº†ï¼Œæœ€æœ€æ ¸å¿ƒçš„è¿˜æ˜¯ `index.ts ` æ–‡ä»¶ã€‚



## åŸæ–‡åœ°å€ + è¯¦ç»†æ³¨é‡Šç‰ˆæºç åœ°å€

[create-vue-code-analysis](https://github.com/CherishTheYouth/create-vue-code-analysis)

ğŸ˜Š å¦‚æœè§‰å¾—è¿˜å¯ä»¥çš„è¯ï¼Œå¯ä»¥ç»™ä¸ªğŸŒŸå—ï¼Œå˜¿å˜¿å˜¿ï¼